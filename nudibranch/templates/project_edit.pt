<div metal:use-macro="_LAYOUT">
<div metal:fill-slot="content">
  <div class="header">${page_title}</div>
  <form id="project_form" name="input" action="${action}"
        onsubmit="return form_request(this, '${method}', true);">
    <p>
      <label for="name">Name</label><br/>
      <input type="text" name="name" id="name" value="${project.name}"/><br/>
    </p>
    <input type="hidden" name="class_id" id="class_id" value="${project.klass.id}"/>
    <input type="hidden" name="makefile_id" id="makefile_id" value="${project.makefile_id}"/>
    <input type="submit" name="submit" value="${submit_text}"/>
  </form>

  <form name="makefile" class="uploader" action="${_R('file_item', sha1sum='_REPLACE_')}">
    <fieldset>
      <legend>Makefile</legend>
      <div>
        <p tal:condition="project.makefile"><a href="#">Existing Makefile</a></p>
        <label for="makefile">Select a Makefile: </label>
        <input name="makefile" id="makefile" type="file" />
      </div>
    </fieldset>
  </form>

  <div tal:repeat="fv project.file_verifiers">
    <form name="file_verifier" action="${_R('file_verifier_item', file_verifier_id=fv.id)}"
          onsubmit="return form_request(this, 'POST', true);">
      <p>
        <label for="filename">Filename</label>
        <input type="text" name="filename" id="filename" value="${fv.filename}"/><br/>
        <label for="min_size">Min Size</label>
        <input type="text" name="min_size" id="min_size" value="${fv.min_size}"/>
        <label for="max_size">Max Size</label>
        <input type="text" name="max_size" id="max_size"
               class="form_optional" placeholder="system max" value="${fv.max_size}"/><br/>
        <label for="min_lines">Min Lines</label>
        <input type="text" name="min_lines" id="min_lines" value="${fv.min_lines}"/>
        <label for="max_lines">Max Lines</label>
        <input type="text" name="max_lines" id="max_lines"
               class="form_optional" placeholder="system max" value="${fv.max_lines}"/><br/>
      </p>
      <input type="submit" name="submit" value="update file"/>
    </form>
  </div>


  <form tal:condition="project.file_verifiers is not None" name="file_verifier" action="${_R('file_verifier')}"
        onsubmit="return form_request(this, 'PUT', true);">
    <p>
      <label for="filename">Filename</label>
      <input type="text" name="filename" id="filename" value=""/><br/>
      <label for="min_size">Min Size</label>
      <input type="text" name="min_size" id="min_size" value="0"/>
      <label for="max_size">Max Size</label>
      <input type="text" name="max_size" id="max_size"
             class="form_optional" placeholder="system max" value=""/><br/>
      <label for="min_lines">Min Lines</label>
      <input type="text" name="min_lines" id="min_lines" value="0"/>
      <label for="max_lines">Max Lines</label>
      <input type="text" name="max_lines" id="max_lines"
             class="form_optional" placeholder="system max" value=""/><br/>
    </p>
    <input type="hidden" name="project_id" value="${project.id}" />
    <input type="submit" name="submit" value="add file"/>
  </form>
</div>
</div>
