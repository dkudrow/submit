<div metal:use-macro="_LAYOUT">
<div metal:fill-slot="content">
  <h1>User Submissions Overview</h1>
  <p>Info for ${project.name}
    (<a href="${_R('project_edit', project_id=project.id)}">edit</a>)</p>
  <p>Users</p>
  <table border="1">
    <tr>
      <th>User</th>
      <th>Submissions (Most Recent Three Shown)</th>
    </tr>
    <tr tal:repeat="(user, user_submissions) submissions">
      <td>
	<a href="${_R('user_item', username=user.username)}">
	  ${user.name}</a>
      </td>
      <td>
	<ul tal:condition="user_submissions">
	  <li tal:repeat="user_submission user_submissions">
	    <a href="${_R('submission_item', submission_id=user_submission.id)}">
	      ${user_submission.created_at}</a>
	  </li>
	  <li tal:condition="user in user_truncated">
	    <a href="${_R('project_item_detailed', class_name=request.matchdict['class_name'], project_id=request.matchdict['project_id'], username=user.username)}">
	      See all submissions...</a>
	  </li>
	</ul>
      </td>
    </tr>
  </table>
</div>
</div>
